<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Mistyovo's Blog</title>
	<link rel="icon" href="/images/favicon.ico" type="image/x-icon">

	<link rel="stylesheet" href="https://mistyovo.xyz/libs/highlight/styles/atom-one-light.css">
	<script src="https://registry.npmmirror.com/twikoo/1.6.44/files/dist/twikoo.min.js"></script>
    <script src="https://mistyovo.xyz/libs/highlight/highlight.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/js/all.min.js" integrity="sha512-b+nQTCdtTBIRIbraqNEwsjB6UvL3UEMkXnhzd8awtCYh0Kcsjl9uEgwVFVbhoj3uu1DO1ZMacNvLoyJJiNfcvg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	<script src="/js/cursor.js"></script>
	<script src="/js/fadeIn.js"></script>
	<script src="/js/snowfall.js"></script>
	
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
	<div id="container">
		<div id="wrap">
			<header>
    <div class="navbar">
        <div class="navbar-left">
            <a href="/" class="navbar-brand">Mistyovo's Blog</a>
        </div>
        <div class="navbar-right">
            <ul class="navbar-menu">
                <li><a href="/"><i class="fa-solid fa-house"></i> 首页</a></li>
                <li><a href="/categories"><i class="fa-solid fa-table"></i> 分类</a></li>
                <li><a href="/archives"><i class="fa-solid fa-box-archive"></i> 归档</a></li>
                <li><a href="/todo"><i class="fa-solid fa-file-check"></i> 任务</a></li>
                <li><a href="/friends"><i class="fa-solid fa-link"></i> 友链</a></li>
                <li><a href="/resources"><i class="fa-solid fa-gift"></i> 资源</a></li>
            </ul>
        </div>
    </div>
</header>
            <div class="sidebar">
	<!--头像-->
	<div class="author-info">
		<div class="avatar">
			<img id="avatar" src="/images/avatar.jpg" alt="博主头像">
		</div>
	</div>
	<script src="/js/avatar-rotate.js"></script>

	<!--博客信息-->
	<div style="font-size: 20px; font-weight: bold; color: #333; text-align: center; margin: 0 0 20px 0;">
		Mistyovo
	</div>
	<div style="font-size: 14px; color: #aaa; text-align: center; margin: 0 0 20px 0;">
		天下第一写屎山手请赐教
	</div>
	<div class="sidebar-stat">
		<ul class="sidebar-stats">
			<li>
				<p class="stat-value">
					15
				</p>
				<p class="stat-label">随笔</p>
			</li>
			<li>
				<p class="stat-value">
					1
				</p>
				<p class="stat-label">分类</p>
			</li>
			<li>
				<p class="stat-value">
					9
				</p>
				<p class="stat-label">标签</p>
			</li>
		</ul>
	</div>

	<!--社交链接-->
	<div class="sidebar-links">
		<ul class="sidebar-links-list">
			<li> <a target="_blank" rel="noopener" href="https://space.bilibili.com/400701785"><i class="fa-brands fa-bilibili" style="color: #00aeec"></i> </a> </li>
			<li> <a target="_blank" rel="noopener" href="https://github.com/Mistyovo"> <i class="fa-brands fa-github-alt" style="color: #5b418b"></i> </a> </li>
			<li> <a href=""> <i class="fa-brands fa-discord" style="color: #5865f2"></i> </a> </li>
			<li> <a href=""> <i class="fa-brands fa-weixin" style="color: #38cd7f"></i> </a> </li>
			<li> <a href=""> <i class="fa-brands fa-qq" style="color: #0099ff"></i> </a> </li>
			<li> <a target="_blank" rel="noopener" href="https://www.zhihu.com/people/mistyovo"> <i class="fa-solid fa-envelope" style="color: pink"></i> </a> </li>
		</ul>
	</div>

	<!--公告板-->
	<div class="bulletin-board">
		<p class="bulletin">公&nbsp&nbsp告</p>
		<p class="bulletin-content">暂时还没有公告哦~</p>
	</div>
</div>
            <div class="outer">
                <section id="main">
			        <head>
    <link rel="stylesheet" href="/css/style.styl">
</head>
<div class="post">
    <div class="header-image"></div>
    <div style="text-align: center;">
        <h1>在wsl中搭建pwn环境</h1>
        <p style="color: #888"><i class="fa-regular fa-calendar-days"></i> Tue Feb 11 2025 12:13:41 GMT+0800</p>
        <br>
    </div>
    <div>
    <p>玩linux的少不了系统重装，每次装系统都要配环境，故记录下环境配置的过程，方便再次查阅，也可以i在</p>
<h2 id="GPG报错的解决方案"><a href="#GPG报错的解决方案" class="headerlink" title="GPG报错的解决方案"></a>GPG报错的解决方案</h2><p>最近不管在安装Kali的时候，不管装的是vmware、wsl、live boot，在使用apt update的时候都会出现如下错误：</p>
<pre><code class="language-bash">apt update
#Get:1 http://kali.download/kali kali-last-snapshot InRelease [41.5 kB]
#Err:1 http://kali.download/kali kali-last-snapshot InRelease
#  Sub-process /usr/bin/sqv returned an error code (1), error message is: Missing key 827C8569F2518CC677FECA1AED65462EC8D5E4C5, which is needed to verify signature.
#Warning: GPG error: http://kali.download/kali kali-last-snapshot InRelease: Sub-process /usr/bin/sqv returned an error code (1), error message is: Missing key #827C8569F2518CC677FECA1AED65462EC8D5E4C5, which is needed to verify signature.
#Error: The repository &#39;http://http.kali.org/kali kali-last-snapshot InRelease&#39; is not signed.
#Notice: Updating from such a repository can&#39;t be done securely, and is therefore disabled by default.
#Notice: See apt-secure(8) manpage for repository creation and user configuration details.
# 解决方法：
sudo wget https://archive.kali.org/archive-keyring.gpg -O /usr/share/keyrings/kali-archive-keyring.gpg
</code></pre>
<h2 id="apt、git-clone、pip、gem下载速度慢的解决方案"><a href="#apt、git-clone、pip、gem下载速度慢的解决方案" class="headerlink" title="apt、git clone、pip、gem下载速度慢的解决方案"></a>apt、git clone、pip、gem下载速度慢的解决方案</h2><h3 id="apt换源"><a href="#apt换源" class="headerlink" title="apt换源"></a>apt换源</h3><pre><code class="language-bash">vim /etc/apt/sources.list
</code></pre>
<p>把<code>http://http.kali.org/kali</code>换成<code>http://mirrors.ustc.edu.cn/kali</code></p>
<p>然后输入<code>apt update</code>和<code>apt upgrade</code></p>
<h3 id="git加速"><a href="#git加速" class="headerlink" title="git加速"></a>git加速</h3><p>在<code>git clone</code>的时候把<code>github.com</code>换成<code>bgithub.xyz</code>（校园网环境测试：换之前&lt;50KB&#x2F;s，换之后&gt;2.5MB&#x2F;s）</p>
<h3 id="pip限制解除及换源"><a href="#pip限制解除及换源" class="headerlink" title="pip限制解除及换源"></a>pip限制解除及换源</h3><h4 id="临时换源"><a href="#临时换源" class="headerlink" title="临时换源"></a>临时换源</h4><pre><code class="language-bash">pip install 包名 -i https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre>
<h4 id="永久换源"><a href="#永久换源" class="headerlink" title="永久换源"></a>永久换源</h4><pre><code class="language-bash">pip config set global.index-url https://mirrors.aliyun.com/pypi/simple
</code></pre>
<p>（校园网环境测试：换之前根本连不上，换之后&gt;2.5MB&#x2F;s）</p>
<p>（有必要也可以把pip换成pip3再执行一次，感觉没什么区别）</p>
<h3 id="gem换源"><a href="#gem换源" class="headerlink" title="gem换源"></a>gem换源</h3><pre><code class="language-bash"># 总体来说换源前还勉强能用，可以先跳过
gem sources --remove https://rubygems.org/  
gem sources -a https://gems.ruby-china.com/   
gem sources -l        
</code></pre>
<h2 id="动态调试工具——gdb-pwndbg"><a href="#动态调试工具——gdb-pwndbg" class="headerlink" title="动态调试工具——gdb &amp; pwndbg"></a>动态调试工具——gdb &amp; pwndbg</h2><pre><code class="language-bash">apt install gdb
apt install python3
apt install python3-venv
git clone https://github.com/pwndbg/pwndbg.git
cd pwndbg
./setup.sh # 执行时最好使用流量，而不是校园网，我在使用校园网安装时报错了
</code></pre>
<p>安装完成后一定不要删除、移动pwndbg的setup源码，可以专门找一个文件夹给他放起来。</p>
<h2 id="gadget查找工具——ROPgadget-one-gadget"><a href="#gadget查找工具——ROPgadget-one-gadget" class="headerlink" title="gadget查找工具——ROPgadget &amp; one_gadget"></a>gadget查找工具——ROPgadget &amp; one_gadget</h2><pre><code class="language-bash"># ROPgadget
git clone https://github.com/JonathanSalwan/ROPgadget.git
cd ROPgadget
python3 setup.py install
# one_gadget
apt install ruby
gem install one_gadget
</code></pre>
<p>安装完成后可以删除git源码</p>
<h2 id="一些可以用apt快速安装的工具"><a href="#一些可以用apt快速安装的工具" class="headerlink" title="一些可以用apt快速安装的工具"></a>一些可以用apt快速安装的工具</h2><pre><code class="language-bash">apt install tmux
apt install python3-pwntools
apt install checksec
</code></pre>
<h2 id="最后附上WSL快捷使用的查询"><a href="#最后附上WSL快捷使用的查询" class="headerlink" title="最后附上WSL快捷使用的查询"></a>最后附上WSL快捷使用的查询</h2><pre><code>版权所有 (c) Microsoft Corporation。保留所有权利。
有关此产品的隐私信息，请访问 https://aka.ms/privacy。

用法: wsl.exe [参数] [选项...][命令行]

运行 Linux 二进制文件的参数:

    如果未提供命令行，wsl.exe 将启动默认 shell。

    --exec, -e &lt;CommandLine&gt; 在不使用默认 Linux shell 的情况下执行指定的命令。
    --shell-type &lt;standard|login|none&gt; 使用提供的 shell 类型执行指定的命令。
    --  按原样传递剩余的命令行。
选项:
    --cd &lt;Directory&gt;
        将指定目录设置为当前工作目录。
        如果使用 ~，则将使用 Linux 用户的主路径。如果路径以
        / 字符开始，它将解释为绝对 Linux 路径。
        否则，该值必须是绝对 Windows 路径。
    --distribution, -d &lt;Distro&gt; 运行指定的分发版。
    --user, -u &lt;UserName&gt; 以指定用户身份运行。
    --system 为系统分发版启动 shell。

用于管理适用于 Linux 的 Windows 子系统的参数:

    --help 显示使用情况信息。
    --debug-shell 出于诊断目的打开 WSL2 调试 shell。
    --install [发行版] [选项...]
        安装适用于 Linux 的 Windows 子系统分发版。
        有关有效分发版的列表，请使用 &#39;wsl.exe --list --online&#39;。
        选项:
            --no-launch, -n 安装后不要启动分发版。
            --web-download 从 Internet 而不是 Microsoft Store 下载分发版。
            --no-distribution 仅安装所需的可选组件，不安装分发版。
            --enable-wsl1 启用 WSL1 支持。
    --manage &lt;Distro&gt; &lt;Options...&gt; 更改发行版特定选项。
        选项:
            --move &lt;Location&gt; 将分发移到新位置。
            --set-sparse, -s &lt;true|false&gt; 将发行版的 vhdx 设置为稀疏，从而允许自动回收磁盘空间。
    --mount &lt;Disk&gt; 在所有 WSL 2 分发版中附加和装载物理磁盘或虚拟磁盘。
        选项:
            --vhd 指定 &lt;Disk&gt; 引用虚拟硬盘。
            --bare 将磁盘附加到 WSL2，但不要装载它。
            --name &lt;Name&gt; 使用装入点的自定义名称装载磁盘。
            --type &lt;Type&gt; 装载磁盘时要使用的文件系统(如果未指定)默认为 ext4。
            --options &lt;Options&gt;  其他装载选项。
            --partition &lt;Index&gt; 要装载的分区的索引(如果未指定)默认为整个磁盘。
    --set-default-version &lt;Version&gt; 更改新分发版的默认安装版本。 
    --shutdown 立即终止所有正在运行的分发版和 WSL 2轻型实用工具虚拟机。
    --status 显示适用于 Linux 的 Windows 子系统状态。
    --unmount [磁盘] 从所有 WSL2 分发版中卸载和分离磁盘。
        如果在没有参数的情况下调用，则卸载和分离所有磁盘。
    --uninstall 从此计算机卸载适用于 Linux 的 Windows 子系统包。
    --update 更新适用于 Linux 的 Windows 子系统包。
        选项:
            --pre-release
                下载预发行版本(如果可用)。
    --version, -v 显示版本信息。

用于在适用于 Linux 的 Windows 子系统中管理分发版的参数:

    --export &lt;Distro&gt; &lt;FileName&gt; [选项]
        将分发版导出到 tar 文件。
        文件名可以是 - for stdout。
        选项:
            --vhd
                指定应将分发版导出为 .vhdx 文件。
    --import &lt;Distro&gt; &lt;InstallLocation&gt; &lt;FileName&gt; [选项]
        将指定的 tar 文件作为新分发版导入。
        文件名可以是 - for stdin。
        选项:
            --version &lt;Version&gt;
                指定要用于新分发的版本。
            --vhd
                指定所提供的文件是 .vhdx 文件，而不是 tar 文件。
                此操作在指定的安装位置创建 .vhdx 文件的副本。
    --import-in-place &lt;Distro&gt; &lt;FileName&gt;
        将指定的 .vhdx 文件作为新分发版导入。
        必须使用 ext4 文件系统类型设置此虚拟硬盘的格式。
    --list, -l [选项] 列出分发版。
        选项:
            --all 列出所有分发版，包括当前正在安装或卸载的分发版。
            --running 仅列出当前正在运行的分发版。
            --quiet, -q 仅显示分发版名称。
            --verbose, -v 显示有关所有分发版的详细信息。
            --online, -o 显示适合通过 &#39;wsl --install&#39; 安装的可用分发版列表。
    --set-default, -s &lt;Distro&gt; 将分布版设置为默认值。
    --set-version &lt;Distro&gt; &lt;Version&gt;  更改指定分发版的版本。
    --terminate, -t &lt;Distro&gt; 终止指定的分发版。
    --unregister &lt;Distro&gt; 取消注册分发版并删除根文件系统。
</code></pre>
<p>命令很多，有用的就那几个：</p>
<pre><code class="language-bash">wsl --list -v # 查看已安装的虚拟机的详细信息
wsl --unregister &lt;Distro&gt; # 彻底删除一个wsl虚拟机
wsl --export &lt;Distro&gt; &lt;FileName.vhdx&gt; --vhd #导出一个wsl虚拟机 （一般vhd比tar大）
wsl --import &lt;Distro&gt; &lt;InstallLocation&gt; &lt;Filename.vhdx&gt; --vhd #导入一个wsl虚拟机
wsl --set-default &lt;Distro&gt; # 设置默认启动的wsl虚拟机
</code></pre>

    </div>
    <div id="twikoo"></div>
    <script>
        // Twikoo initialization
        twikoo.init({
            envId: 'http://101.200.30.183:8080/', // Replace with your Twikoo server URL
            el: '#twikoo'
        });
    </script>
	<script src="/js/contents.js"></script>
</div>
                </section>
				<footer class="footer">
	<div class="footer-content">
		<div class="footer-content-left">
			<p>博客观点仅代表作者，与第三方无关</p>
			<p>© 2018-2025 Mistyovo's Blog. All Rights Reserved.</p>
		</div>
		<div class="footer-content-right">
			<p><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">闽ICP备2025101699号</a></p>
			<p>Powered by <a href="https://hexo.io" target="_blank">Hexo</a></p>
		</div>
	</div>
	<script>
		hljs.highlightAll();
		hljs.configure({
			tabReplace: '    '
		});
	</script>
</footer>
            </div>
		</div>
	</div>
	<div class="tools">
	<div class="tools-item reward">
		<i class="fa-brands fa-btc" onclick="reward()"></i>
		<div id="rewards" class="message-box">
			<img src="/images/wechat.png">
		</div>
	</div>	
	<div class="tools-item btt" onclick="scrollToTop()">
		<i class="fa-solid fa-arrow-up-to-line"></i>
	</div>
</div>
<script src="/js/tools.js"></script>
</body>
</html>